{"version":3,"sources":["../src/cli.ts"],"sourcesContent":["/* SPDX-License-Identifier: AGPL-3.0-only */\n/*            USOS Survey Filler          */\n/*       Copyright © 2025 Konrad Guzek    */\n\nimport { execSync } from \"child_process\";\nimport { writeFile } from \"fs/promises\";\nimport { input } from \"@inquirer/prompts\";\nimport boxen from \"boxen\";\nimport chalk from \"chalk\";\nimport { program } from \"commander\";\nimport { config } from \"dotenv\";\n\nconst VERSION = process.env.npm_package_version || \"1.2.0\";\n\nconst REPO_URL = \"https://github.com/kguzek/usos-survey-filler\";\n\nconst cardIntro = boxen(\n  chalk.white(`\nWitaj w USOS Survey Filler ${VERSION}!\n\nTwórca: Konrad Guzek\nGitHub: ${chalk.underline(\"https://github.com/kguzek\")}\nEmail: konrad@guzek.uk\n`),\n  {\n    padding: 1,\n    margin: 1,\n    borderStyle: \"round\",\n    borderColor: \"cyan\",\n    textAlignment: \"center\",\n  },\n);\n\nconst cardOutro = boxen(\n  chalk.white(`\nDziękuję za korzystanie z USOS Survey Filler.\n\n⭐ Zostaw mi gwiazdkę na GitHubie! ⭐\n  \n${chalk.underline(REPO_URL)}\n`),\n  {\n    padding: 1,\n    margin: 1,\n    borderStyle: \"round\",\n    borderColor: \"yellow\",\n    textAlignment: \"center\",\n  },\n);\n\nconst cardError = boxen(\n  chalk.white(`\nWystąpił nieoczekiwany błąd podczas wykonywania aplikacji.\nJeśli problem będzie się powtarzał, zgłoś go na GitHubie:\n\n${chalk.underline(REPO_URL + \"/issues/new\")}\n`),\n  {\n    padding: 1,\n    margin: 1,\n    borderStyle: \"round\",\n    borderColor: \"red\",\n    textAlignment: \"center\",\n  },\n);\n\nprogram.version(VERSION).description(\"USOS Survey Filler\");\n\nconst printRaw = (emoji: string, message: string) =>\n  console.log(\n    `\\n${emoji} ${chalk.dim(\"[\")}${chalk.bgCyan.black(\"USOS Survey Filler\")}${chalk.reset.dim(\"]\")} ${message}\\n`,\n  );\nconst printInfo = (message: string) => printRaw(\"ℹ\", chalk.cyan(message));\nconst printError = (message: string) => printRaw(\"❌\", chalk.red(message));\n\nprogram.action(async () => {\n  config();\n\n  console.log(cardIntro);\n\n  const username =\n    process.env.USOS_USERNAME ||\n    (await input({\n      message: \"👤 Nazwa użytkownika do USOSa (opcjonalne):\",\n    }));\n\n  const password =\n    process.env.USOS_PASSWORD ||\n    (await input({\n      message: \"🔑 Hasło do USOSa (opcjonalne):\",\n    }));\n\n  if (password !== \"\" || username !== \"\") {\n    // Create a .env file with the provided values\n    const envContent = `USOS_USERNAME=${username}\\nUSOS_PASSWORD=${password}`;\n    await writeFile(\".env\", envContent);\n  }\n\n  config();\n\n  printInfo(\"Trwa instalacja programu...\");\n  execSync(\"npx puppeteer browser install chrome\", { stdio: \"inherit\" });\n  printInfo(\"Instalacja ukończona. Uruchamianie programu...\");\n  try {\n    execSync(\"npm run start\", { stdio: \"inherit\" });\n    console.log(cardOutro);\n  } catch {\n    printError(\"Program zakończył się niezerowym kodem wyjścia.\");\n    console.log(cardError);\n  }\n});\n\nprogram.parse(process.argv);\n"],"mappings":";AAIA,SAAS,gBAAgB;AACzB,SAAS,iBAAiB;AAC1B,SAAS,aAAa;AACtB,OAAO,WAAW;AAClB,OAAO,WAAW;AAClB,SAAS,eAAe;AACxB,SAAS,cAAc;AAEvB,IAAM,UAAU,QAAQ,IAAI,uBAAuB;AAEnD,IAAM,WAAW;AAEjB,IAAM,YAAY;AAAA,EAChB,MAAM,MAAM;AAAA,6BACe,OAAO;AAAA;AAAA;AAAA,UAG1B,MAAM,UAAU,2BAA2B,CAAC;AAAA;AAAA,CAErD;AAAA,EACC;AAAA,IACE,SAAS;AAAA,IACT,QAAQ;AAAA,IACR,aAAa;AAAA,IACb,aAAa;AAAA,IACb,eAAe;AAAA,EACjB;AACF;AAEA,IAAM,YAAY;AAAA,EAChB,MAAM,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,EAKZ,MAAM,UAAU,QAAQ,CAAC;AAAA,CAC1B;AAAA,EACC;AAAA,IACE,SAAS;AAAA,IACT,QAAQ;AAAA,IACR,aAAa;AAAA,IACb,aAAa;AAAA,IACb,eAAe;AAAA,EACjB;AACF;AAEA,IAAM,YAAY;AAAA,EAChB,MAAM,MAAM;AAAA;AAAA;AAAA;AAAA,EAIZ,MAAM,UAAU,WAAW,aAAa,CAAC;AAAA,CAC1C;AAAA,EACC;AAAA,IACE,SAAS;AAAA,IACT,QAAQ;AAAA,IACR,aAAa;AAAA,IACb,aAAa;AAAA,IACb,eAAe;AAAA,EACjB;AACF;AAEA,QAAQ,QAAQ,OAAO,EAAE,YAAY,oBAAoB;AAEzD,IAAM,WAAW,CAAC,OAAe,YAC/B,QAAQ;AAAA,EACN;AAAA,EAAK,KAAK,IAAI,MAAM,IAAI,GAAG,CAAC,GAAG,MAAM,OAAO,MAAM,oBAAoB,CAAC,GAAG,MAAM,MAAM,IAAI,GAAG,CAAC,IAAI,OAAO;AAAA;AAC3G;AACF,IAAM,YAAY,CAAC,YAAoB,SAAS,UAAK,MAAM,KAAK,OAAO,CAAC;AACxE,IAAM,aAAa,CAAC,YAAoB,SAAS,UAAK,MAAM,IAAI,OAAO,CAAC;AAExE,QAAQ,OAAO,YAAY;AACzB,SAAO;AAEP,UAAQ,IAAI,SAAS;AAErB,QAAM,WACJ,QAAQ,IAAI,iBACX,MAAM,MAAM;AAAA,IACX,SAAS;AAAA,EACX,CAAC;AAEH,QAAM,WACJ,QAAQ,IAAI,iBACX,MAAM,MAAM;AAAA,IACX,SAAS;AAAA,EACX,CAAC;AAEH,MAAI,aAAa,MAAM,aAAa,IAAI;AAEtC,UAAM,aAAa,iBAAiB,QAAQ;AAAA,gBAAmB,QAAQ;AACvE,UAAM,UAAU,QAAQ,UAAU;AAAA,EACpC;AAEA,SAAO;AAEP,YAAU,6BAA6B;AACvC,WAAS,wCAAwC,EAAE,OAAO,UAAU,CAAC;AACrE,YAAU,qDAAgD;AAC1D,MAAI;AACF,aAAS,iBAAiB,EAAE,OAAO,UAAU,CAAC;AAC9C,YAAQ,IAAI,SAAS;AAAA,EACvB,QAAQ;AACN,eAAW,qEAAiD;AAC5D,YAAQ,IAAI,SAAS;AAAA,EACvB;AACF,CAAC;AAED,QAAQ,MAAM,QAAQ,IAAI;","names":[]}